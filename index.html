<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Warehouse Bin Chart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      font-family: 'Nunito', system-ui;
      background: #0f172a;
      color: #e5e7eb;
      overflow-x: hidden;
      overflow-y: auto;
    }

    h2 {
      margin: 16px;
      font-size: 20px;
    }

    .bin-chart-container {
      padding: 12px 16px 40px;
    }

    .row-section {
      display: flex;
      align-items: flex-start;
      margin-bottom: 14px;
    }

    .row-label {
      width: 36px;
      font-weight: 700;
      font-size: 14px;
      color: #94a3b8;
      padding-top: 10px;
      flex-shrink: 0;
    }

    .row-bins {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      flex: 1;
    }

    .bin-box {
      width: 86px;
      height: 48px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      user-select: none;
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.18),
        0 4px 10px rgba(0,0,0,0.35);
    }

    .empty   { background: linear-gradient(145deg, #16a34a, #22c55e); }
    .partial { background: linear-gradient(145deg, #ca8a04, #facc15); color: #1f2937; }
    .full    { background: linear-gradient(145deg, #b91c1c, #ef4444); }
  </style>
</head>
<body>

  <h2>Bin Chart â€“ Warehouse Storage</h2>
  <div class="bin-chart-container" id="binChart"></div>

  <script>
    /* ---------------- DATA (replace with API) ---------------- */
    const apiResponse = Array.from({ length: 300 }, (_, i) => ({
      RowCode: i < 90 ? "G" : "T",
      BinCode: `BIN-${i + 1}`,
      Status: i % 3 === 0 ? "EMPTY" : i % 3 === 1 ? "PARTIAL" : "FULL",
      CurrentQty: 10,
      CapacityQty: 100
    }));

    /* ---------------- RENDER ---------------- */
    function groupByRow(data) {
      return data.reduce((acc, item) => {
        (acc[item.RowCode] ??= []).push(item);
        return acc;
      }, {});
    }

    function renderBinChart(data) {
      const container = document.getElementById("binChart");
      const grouped = groupByRow(data);

      Object.keys(grouped).sort().forEach(rowCode => {
        const row = document.createElement("div");
        row.className = "row-section";

        row.innerHTML = `
          <div class="row-label">${rowCode}</div>
          <div class="row-bins">
            ${grouped[rowCode].map(b =>
              `<div class="bin-box ${b.Status.toLowerCase()}">${b.BinCode}</div>`
            ).join("")}
          </div>
        `;

        container.appendChild(row);
      });
    }

    renderBinChart(apiResponse);

    /* ---------------- AUTO SCROLL ---------------- */
    let scrollSpeed = 0.25; // ðŸ”§ smaller = slower (recommended 0.15 â€“ 0.4)
    let autoScrollId = null;

    function autoScroll() {
      const maxScroll =
        document.documentElement.scrollHeight - window.innerHeight;

      if (window.scrollY < maxScroll) {
        window.scrollBy(0, scrollSpeed);
        autoScrollId = requestAnimationFrame(autoScroll);
      } else {
        cancelAnimationFrame(autoScrollId); // stop at end
      }
    }

    // start scrolling only if needed
    window.addEventListener("load", () => {
      setTimeout(() => {
        if (document.body.scrollHeight > window.innerHeight) {
          autoScroll();
        }
      }, 1200); // delay for render
    });
  </script>

  <script>
  let currentScroll = 0;
  const speed = 0.4; // pixels per frame (0.3â€“0.6 smooth)

  function autoScroll() {
    const maxScroll =
      document.documentElement.scrollHeight - window.innerHeight;

    if (currentScroll < maxScroll) {
      currentScroll += speed;
      window.scrollTo(0, Math.floor(currentScroll));
      requestAnimationFrame(autoScroll);
    }
  }

  window.addEventListener("load", () => {
    // wait until layout & bins are rendered
    setTimeout(() => {
      if (document.body.scrollHeight > window.innerHeight) {
        autoScroll();
      }
    }, 1500);
  });
</script>


</body>
</html>
